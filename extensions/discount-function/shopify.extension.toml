api_version = "2025-04"

[[extensions]]
name = "t:name"
handle = "discount-function"
type = "function"

description = "t:description"

  [[extensions.targeting]]
  target = "cart.lines.discounts.generate.run"
  input_query = "src/cart_lines_discounts_generate_run.graphql"
  export = "cart-lines-discounts-generate-run"

  [[extensions.targeting]]
  target = "cart.delivery-options.discounts.generate.run"
  input_query = "src/cart_delivery_options_discounts_generate_run.graphql"
  export = "cart-delivery-options-discounts-generate-run"

  [extensions.build]
  command = ""
  path = "dist/function.wasm"

  [extensions.capabilities]
  network_access = false
  api_access = false

  [extensions.settings]
  type = "object"
  fields = [
    { key = "discountClasses", type = "list", name = "Discount Classes" },
    { key = "discountPercentage", type = "number", name = "Discount Percentage" },
    { key = "minimumOrderAmount", type = "number", name = "Minimum Order Amount" },
    { key = "usageLimit", type = "number", name = "Usage Limit" }
  ]

  # No UI paths - function works without configuration
